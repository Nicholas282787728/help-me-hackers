%li{comment_attrs(comment)}
  .commenter
    .content
      .title
        %div{good_attrs(comment)}
          %dl.good
            %dt.label
              %span Good!
            %dd.count{:id => "comment_#{comment.id}_good"}= comment.votes.size
        %h4
          %a.commenter{:href => user_path(comment.user)}
            %span.icon= image_tag(comment.user.profile_image_url)
            %span.name= comment.user.login
          - if logged_in? and @task.user.id == current_user.id and @task.unsolved?
            %li.correct
              - form_for comment do |f|
                = hidden_field_tag 'comment[correct]', true
                = image_submit_tag 'choice_button.gif'
      - form_for comment.votes.new(:comment => good_comment_retweet(comment)), :html => {:id => "comment_#{comment.id}_vote_form", :style => 'display:none'} do |f|
        - if logged_in?
          .text
            = f.hidden_field :voteable_id, :id => "comment_#{comment.id}_voteable_id"
            = f.hidden_field :voteable_type, :id => "comment_#{comment.id}_voteable_type"
            = f.text_field :comment, :id => "comment_#{comment.id}_comment", :maxlength => 140
          - if logged_in?
            .button= image_submit_tag 'good_button.gif'
          - else
            .button= link_to 'Retweet', login_path
          %p.center Retweetをすることで、このタスクにGood!ポイントが加算されます
        - else
          .please_login== Retweetするには#{link_to 'Twitterでログイン', login_path}してください。
      .description~markdown comment.description
      - if logged_in? and comment.user.id == current_user.id
        %ul.loggedin
          %li.edit= link_to 'このコメントを編集', edit_comment_path(comment), :class => 'sub_button'
          %li.delete= link_to 'このコメントを削除', comment, :confirm => '本当に削除してよろしいですか？', :method => :delete, :class => 'sub_button'
